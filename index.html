<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comfort Plus | –ú–µ–±–ª—ñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #007bff; --success: #28a745; --bg: #f4f7f6; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        header { background: white; padding: 15px 0 0; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .menu-wrapper { display: flex; overflow-x: auto; gap: 8px; padding: 12px 15px; scrollbar-width: none; }
        .menu-wrapper::-webkit-scrollbar { display: none; }
        .menu-wrapper button { white-space: nowrap; padding: 8px 18px; border: 1px solid #eee; border-radius: 20px; background: #fdfdfd; font-size: 13px; font-weight: 600; flex-shrink: 0; cursor: pointer; }
        
        #catalog-container { padding: 10px; max-width: 1000px; margin: 0 auto; }
        .category-title { text-align: center; margin: 40px 0 20px; font-size: 20px; font-weight: 700; color: #444; text-transform: uppercase; letter-spacing: 1px; }
        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
        .product-card { background: white; border-radius: 15px; padding: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: center; display: flex; flex-direction: column; }
        .product-card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 10px; }
        .product-card h3 { font-size: 13px; margin: 12px 0 8px; min-height: 32px; }
        .price-tag { font-weight: 700; color: var(--success); font-size: 16px; margin-bottom: 12px; }
        .btn-select { background: var(--primary); color: white; border: none; padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: auto; }

        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: flex-end; }
        .modal-content { background: white; width: 100%; max-width: 500px; border-radius: 20px 20px 0 0; padding: 20px; box-sizing: border-box; }
    </style>
</head>
<body>

<header>
    <h1 style="font-size: 18px; margin: 0 0 10px;">üõçÔ∏è Comfort Plus</h1>
    <div class="menu-wrapper" id="main-menu"></div>
</header>

<div id="catalog-container">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>

<script>
const CSV_URL = 'https://docs.google.com/spreadsheets/d/1Kd4ODQgS8QOFHOg2k4lCvRgizqSRnY17qiaStmV6BNY/export?format=csv&gid=415679695';

async function loadData() {
    const res = await fetch(CSV_URL);
    const data = await res.text();
    const rows = data.split('\n').slice(1);
    
    const products = rows.map(row => {
        const c = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(v => v.replace(/"/g, '').trim());
        const num = (v) => parseFloat(v?.replace(',', '.')) || 0;
        return { id: c[0], cat: c[1], name: c[2], img: c[3], base: num(c[4]), xl: num(c[5]) };
    }).filter(p => p.id);

    render(products);
}

function render(products) {
    const menu = document.getElementById('main-menu');
    const catalog = document.getElementById('catalog-container');
    menu.innerHTML = '';
    catalog.innerHTML = '';

    const grouped = {};
    products.forEach(p => {
        if (!grouped[p.cat]) grouped[p.cat] = [];
        grouped[p.cat].push(p);
    });

    Object.keys(grouped).forEach(catName => {
        const safeId = "cat-" + catName.replace(/\s+/g, '-');
        
        // –ö–Ω–æ–ø–∫–∞
        const btn = document.createElement('button');
        btn.innerText = catName;
        btn.onclick = () => {
            const el = document.getElementById(safeId);
            window.scrollTo({ top: el.offsetTop - 100, behavior: 'smooth' });
        };
        menu.appendChild(btn);

        // –†–æ–∑–¥—ñ–ª
        const section = document.createElement('section');
        section.id = safeId;
        section.innerHTML = `<h2 class="category-title">--- ${catName} ---</h2>`;
        const grid = document.createElement('div');
        grid.className = 'product-grid';

        grouped[catName].forEach(p => {
            const price = p.base > 0 ? p.base : p.xl;
            grid.innerHTML += `
                <div class="product-card">
                    <img src="images/${p.img}" onerror="this.src='https://via.placeholder.com/200'">
                    <h3>${p.name}</h3>
                    <div class="price-tag">–≤—ñ–¥ ${price} –≥—Ä–Ω</div>
                    <button class="btn-select" onclick="alert('–¶—ñ–Ω–∞: ${price} –≥—Ä–Ω')">–í–∏–±—Ä–∞—Ç–∏</button>
                </div>`;
        });
        section.appendChild(grid);
        catalog.appendChild(section);
    });
}
loadData();
</script>
</body>
</html>
